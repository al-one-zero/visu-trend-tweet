<!DOCTYPE html>
<html lang="en">
<head>
  <title>Twitter</title>
  <link rel="stylesheet" type="text/css" href="../static/reset.css">
  <link rel="stylesheet" type="text/css" href="../static/application.css">
  <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <meta charset="utf-8" />

   <script type="text/javascript" src="../static/client.js"></script>
   <script type="text/javascript" src="../static/hist.js"></script>

   <style type="text/css">
    canvas {
      border: 3px solid #444;
    }
    .grid	{
      float:left;
      width:600px;
      margin:0 10px;
      }
    .grid h1 {font-size:25px;text-align:center;}
    .grid p {text-align:left;}
  </style>

</head>
<body>
  <div class="grid">
    <h1>histogramme exemple</h1>		
    <canvas id="diagramme" width="600" height="400"></canvas>
  </div>
  <div id="topbar">
    <div class='navbar'>
      <ul>
        <li><a href='index.html'><span><i class="fa fa-home fa-lg"></i> Home</span></a></li>
        <li><a href='index.html'><span><i class="fa fa-bell fa-lg"></i> Notifications</span></a></li>
        <li><a href='index.html'><span><i class="fa fa-flag fa-lg"></i> Discover</span></a></li>
        <li><a href='index.html'><span><i class="fa fa-user fa-lg"></i> Me</span></a></li>
      </ul>
    </div>
    <div id="search">
      <form class="search">
       <input type="text" id="search-q"  class="search-query" placeholder="Search" />  
       <button type="submit" id="search-b" class="search-button">
      </button>
    </form>
  </div>
  <div class='navbar right'>
    <ul>
      <li><a href='index.html'><span><i class="fa fa-envelope fa-lg"></i> </span></a></li>
      <li><a href='index.html'><span><i class="fa fa-gear fa-lg"></i></span></a></li>
      <li><span><button class="compose"><i class="fa fa-edit fa-lg"></i></button></span></li>
    </ul>
  </div>

  <script type="text/javascript">    
  window.addEventListener("load", function () {

  search_bar=document.getElementById("search");
  let text_input=search_bar.getElementsByClassName("search-query");
  console.log(text_input);
 
  let submit_buttom=search_bar.getElementsByClassName("search-button");
  console.log(submit_buttom);
  text_input.addEventListener("search",recherche());
  
  //let exemple_param ={"country":"France"};
  function recherche() {
  let q//=Client.query("tweets_number");
  let text_input=search_bar.getElementsByClassName("search-query");
  let txt=text_input.value
  console.log("texxxt");
  console.log(txt);
  q=Client.query("/search?p="+txt);
  console.log(q);
  q.then((value) => {
  
  console.log(value);
  values=JSON.parse(value);
  let long=values.l
  console.log(long);
  let repartition=values.rep


  let x=Object.keys(repartition)
  let y=Object.values(repartition);
  
  histogramme(y,x,"Tweets number","Country","diagramme"); 
  
  });}
});

    

  


 /* var values = JSON.parse(value);

  
  
*/
  



    
    
  
  
  
  
  </script>
  

</div>


</body>
</html>